--source include/have_log_bin.inc
--source include/have_binlog_format_mixed.inc

# Reproducible with MyISAM, InnoDB, Aria

CREATE TABLE t1 (f1 INT);
CREATE TABLE t2 (f2 INT);
CREATE TABLE t3 (f3 INT);
CREATE TABLE t4 (pk INT AUTO_INCREMENT PRIMARY KEY);

CREATE TRIGGER tr1 BEFORE INSERT ON t1 FOR EACH ROW INSERT INTO t2 VALUES ();
CREATE TRIGGER tr2 AFTER INSERT ON t1 FOR EACH ROW INSERT INTO t3 VALUES ();
CREATE TRIGGER tr3 BEFORE INSERT ON t2 FOR EACH ROW INSERT INTO t4 VALUES ();

LOCK TABLE t1 WRITE;
INSERT INTO t2 () VALUES ();
INSERT INTO t3 VALUES ();

# Cleanup

UNLOCK TABLES;
DROP TABLE t1, t2, t3, t4;
